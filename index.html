<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Asep's Dream Home - 3D View</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #1a1a1a; font-family: 'Segoe UI', sans-serif; }
        #info {
            position: absolute; top: 20px; width: 100%; text-align: center;
            color: white; pointer-events: none; z-index: 100;
            text-shadow: 2px 2px 4px #000000;
        }
        #loading {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #00ff88; font-size: 24px; font-weight: bold; pointer-events: none;
        }
        h1 { margin: 0; font-size: 28px; letter-spacing: 1px; }
        p { color: #ccc; font-size: 14px; }
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div id="info">
        <h1>ASEP'S RESIDENCE</h1>
        <p>Ground Floor (Living/Dining) + First Floor (Private) | South Facing Plot</p>
        <p><i>Left Click: Rotate | Right Click: Pan | Scroll: Zoom</i></p>
    </div>
    
    <div id="loading">LOADING 3D ENGINE...</div>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // Hide loading text when script runs
        document.getElementById('loading').style.display = 'none';

        // --- SCENE SETUP ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x222222);
        scene.fog = new THREE.Fog(0x222222, 20, 150);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(40, 30, 40); // High angle view

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        // --- LIGHTING ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 1.2);
        dirLight.position.set(20, 50, 20);
        dirLight.castShadow = true;
        dirLight.shadow.mapSize.width = 2048;
        dirLight.shadow.mapSize.height = 2048;
        scene.add(dirLight);

        // --- MATERIALS ---
        const concreteMat = new THREE.MeshStandardMaterial({ color: 0xd0d0d0, roughness: 0.8 }); // Walls
        const darkMat = new THREE.MeshStandardMaterial({ color: 0x333333, roughness: 0.6 });    // Roof/Accent
        const glassMat = new THREE.MeshStandardMaterial({ color: 0x88ccff, roughness: 0.1, metalness: 0.9, transparent: true, opacity: 0.6 });
        const grassMat = new THREE.MeshStandardMaterial({ color: 0x2d4c1e });

        // --- BUILD THE HOUSE ---
        const houseGroup = new THREE.Group();

        // 1. The Plot (Ground)
        const ground = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), grassMat);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // 2. Ground Floor (30x40ft representation)
        // Scale: 1 unit = approx 2 feet for visualization
        const gf = new THREE.Mesh(new THREE.BoxGeometry(15, 6, 20), concreteMat);
        gf.position.y = 3; 
        gf.castShadow = true;
        gf.receiveShadow = true;
        houseGroup.add(gf);

        // GF Entrance (Visual Marker)
        const door = new THREE.Mesh(new THREE.BoxGeometry(4, 4, 1), darkMat);
        door.position.set(0, 2, 10); // Front of house
        houseGroup.add(door);

        // 3. First Floor (Slightly smaller, creating a terrace)
        const ff = new THREE.Mesh(new THREE.BoxGeometry(12, 6, 15), concreteMat);
        ff.position.y = 9; // 6 (GF height) + 3 (Half FF height)
        ff.position.z = -2; // Set back to create balcony at front
        ff.castShadow = true;
        houseGroup.add(ff);

        // 4. The Terrace/Balcony (Glass Railing)
        const railing = new THREE.Mesh(new THREE.BoxGeometry(12, 1.5, 0.2), glassMat);
        railing.position.set(0, 6.75, 5.5); // Front edge of GF roof
        houseGroup.add(railing);

        scene.add(houseGroup);

        // --- CONTROLS ---
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.autoRotate = true; // Slowly spin nicely
        controls.autoRotateSpeed = 0.5;

        // --- ANIMATION ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
